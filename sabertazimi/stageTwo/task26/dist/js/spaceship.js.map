{"version":3,"sources":["spaceship.js"],"names":["spaceship","orbit","obj","isFly","falsem","isGone","leftEnergy","flySpeed","restoreSpeed","consumeSpeed","angle","driveSys","launch","energy","stop","fly","speed","energySys","restore","consume","destroySys","destroy","$","remove","transferSys","messageReceiver","msg","command","value","logger","log"],"mappings":"AAGA,QAASA,WAAUC,GACf,GAAIC,IACAC,MAAOC,OACPC,QAAQ,EACRC,WAAY,IACZC,SAAU,EACVC,aAAc,EACdC,aAAc,GACdC,MAAO,EAEPC,UACIC,OAAQ,WACAV,EAAIW,OAAS,IACbX,EAAIC,OAAQ,IAGpBW,KAAM,WACFZ,EAAIC,OAAQ,GAEhBY,IAAK,WACGb,EAAIC,QACJD,EAAIQ,OAASR,EAAIc,OAErBd,EAAIQ,OAAS,MAIrBO,WACIC,QAAS,WACAhB,EAAIC,QACLD,EAAIW,QAAUX,EAAIM,cAElBN,EAAIW,OAAS,MACbX,EAAIW,OAAS,MAGrBM,QAAS,WACDjB,EAAIC,QACJD,EAAIW,QAAUX,EAAIO,cAElBP,EAAIW,QAAU,IACdX,EAAIC,OAAQ,EACZD,EAAIW,OAAS,KAKzBO,YACIC,QAAS,WACLnB,EAAIG,QAAS,EACbiB,EAAE,QAAUpB,EAAID,OAAOsB,WAI/BC,aACIC,gBAAiB,SAAUxB,EAAOyB,GAC9B,OAAQA,EAAIC,SACR,IAAK,SACDzB,EAAIS,SAASC,QACb,MACJ,KAAK,OACDV,EAAIS,SAASG,MACb,MACJ,KAAK,OACDZ,EAAIK,SAAWmB,EAAIE,KACnB,MACJ,KAAK,UACD1B,EAAIkB,WAAWC,SACf,MACJ,SACIQ,OAAOC,IAAI,YAO/B,OAAO5B","file":"spaceship.js","sourcesContent":["/**\n *  spaceship prototype\n */\nfunction spaceship(orbit) {\n    var obj = {\n        isFly: falsem,\n        isGone: false,\n        leftEnergy: 100,\n        flySpeed: 1,\n        restoreSpeed: 5,\n        consumeSpeed: 10,\n        angle: 0,\n\n        driveSys: {\n            launch: function () {\n                if (obj.energy > 0) {\n                    obj.isFly = true;\n                }\n            },\n            stop: function () {\n                obj.isFly = false;\n            },\n            fly: function () {\n                if (obj.isFly) {\n                    obj.angle += obj.speed;\n                }\n                obj.angle %= 360;\n            }\n        },\n\n        energySys: {\n            restore: function () {\n                if (!obj.isFly) {\n                    obj.energy += obj.restoreSpeed;\n                }\n                if (obj.energy > 100) {\n                    obj.energy = 100;\n                }\n            },\n            consume: function () {\n                if (obj.isFly) {\n                    obj.energy -= obj.consumeSpeed;\n                }\n                if (obj.energy <= 0) {\n                    obj.isFly = false;\n                    obj.energy = 0;\n                }\n            }\n        },\n\n        destroySys: {\n            destroy: function () {\n                obj.isGone = true;\n                $('#ship' + obj.orbit).remove();\n            }\n        },\n\n        transferSys: {\n            messageReceiver: function (orbit, msg) {\n                switch (msg.command) {\n                    case 'launch':\n                        obj.driveSys.launch();\n                        break;\n                    case 'stop':\n                        obj.driveSys.stop();\n                        break;\n                    case 'rate':\n                        obj.flySpeed = msg.value;\n                        break;\n                    case 'destory':\n                        obj.destroySys.destroy();\n                        break;\n                    default:\n                        logger.log('错误指令!');\n                        break;\n                }\n            }\n        }\n    };\n\n    return obj;\n}\n"],"sourceRoot":"/source/"}