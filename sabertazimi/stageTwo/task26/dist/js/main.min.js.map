{"version":3,"sources":["main.min.js"],"names":["spaceship","orbit","obj","isFly","falsem","isGone","leftEnergy","flySpeed","restoreSpeed","consumeSpeed","angle","driveSys","launch","energy","stop","fly","speed","energySys","restore","consume","destroySys","destroy","$","remove","transferSys","messageReceiver","msg","command","value","logger","log","global","doc","undef","_log","last","append","Date","window","document","mediator","orbits","subUid","subscribe","func","token","toString","push","context","this","callback","publish","args","len","Array","prototype","slice","call","arguments","length","i","subscription","apply","unsubscribe","m","j","splice","commander","_create","click","e","event","target","srcElement","console","innerHTML","nodeName","toLowerCase","create"],"mappings":"AAqFA,QAASA,WAAUC,GACf,GAAIC,IACAC,MAAOC,OACPC,QAAQ,EACRC,WAAY,IACZC,SAAU,EACVC,aAAc,EACdC,aAAc,GACdC,MAAO,EAEPC,UACIC,OAAQ,WACAV,EAAIW,OAAS,IACbX,EAAIC,OAAQ,IAGpBW,KAAM,WACFZ,EAAIC,OAAQ,GAEhBY,IAAK,WACGb,EAAIC,QACJD,EAAIQ,OAASR,EAAIc,OAErBd,EAAIQ,OAAS,MAIrBO,WACIC,QAAS,WACAhB,EAAIC,QACLD,EAAIW,QAAUX,EAAIM,cAElBN,EAAIW,OAAS,MACbX,EAAIW,OAAS,MAGrBM,QAAS,WACDjB,EAAIC,QACJD,EAAIW,QAAUX,EAAIO,cAElBP,EAAIW,QAAU,IACdX,EAAIC,OAAQ,EACZD,EAAIW,OAAS,KAKzBO,YACIC,QAAS,WACLnB,EAAIG,QAAS,EACbiB,EAAE,QAAUpB,EAAID,OAAOsB,WAI/BC,aACIC,gBAAiB,SAAUxB,EAAOyB,GAC9B,OAAQA,EAAIC,SACR,IAAK,SACDzB,EAAIS,SAASC,QACb,MACJ,KAAK,OACDV,EAAIS,SAASG,MACb,MACJ,KAAK,OACDZ,EAAIK,SAAWmB,EAAIE,KACnB,MACJ,KAAK,UACD1B,EAAIkB,WAAWC,SACf,MACJ,SACIQ,OAAOC,IAAI,YAO/B,OAAO5B,GA9JX,GAAI2B,QAAU,SAASE,EAAQC,EAAKC,GAChC,QAASC,GAAKR,GACNA,GACAJ,EAAE,gBAAgBa,OAAOC,OAAO,oCAAsC,GAAIC,MAAS,KAAOX,EAAM,YAIxG,OACII,IAAKI,IAEXI,OAAQC,UAKNC,SAAY,SAAWT,EAAQC,EAAKC,GACpC,GAAIQ,MACAC,EAAS,GAETC,EAAY,SAAU1C,EAAO2C,GACzB,GAAIC,EAeJ,OAbKJ,GAAOxC,KACRwC,EAAOxC,OAIX4C,KAAWH,GAAQI,WACnBL,EAAOxC,GAAO8C,MACVC,QAASC,KACThD,MAAOA,EACP4C,MAAOA,EACPK,SAAUN,IAGPC,GAEXM,EAAU,SAAUlD,GAChB,GAAImD,GACAC,CAGJ,KAAKZ,EAAOxC,GACR,OAAO,CAGXmD,GAAOE,MAAMC,UAAUC,MAAMC,KAAKC,WAClCL,EAAMZ,EAAOxC,GAAO0D,MAEpB,KAAK,GAAIC,GAAI,EAAMP,EAAJO,EAAQA,IAAK,CACxB,GAAIC,GAAepB,EAAOxC,GAAO2D,EACjCC,GAAaX,SAASY,MAAMD,EAAab,QAASI,GAItD,MAAOH,OAEXc,EAAc,SAAUlB,GACpB,IAAK,GAAImB,KAAKvB,GACV,GAAIA,EAAOuB,GACP,IAAK,GAAIJ,GAAI,EAAGK,EAAIxB,EAAOuB,GAAGL,OAAYM,EAAJL,EAAOA,IACzC,GAAInB,EAAOuB,GAAGJ,GAAGf,QAAUA,EAEvB,MADAJ,GAAOuB,GAAGE,OAAON,EAAG,GACbf,CAKvB,QAAO,EAGX,QACIF,UAAWA,EACXQ,QAASA,EACTY,YAAaA,IAEvBzB,OAAQC,UAwFN4B,UAAa,SAAUpC,EAAQC,EAAKC,GAcpC,QAASmC,MAIT,MAfA9C,GAAE,mBAAmB+C,MAAM,SAAUC,GACjC,GAAIC,GAAQD,GAAKhC,OAAOiC,MACpBC,EAASD,EAAMC,QAAUD,EAAME,UAE/BC,SAAQ5C,IAAI0C,EAAOG,WAEc,UAAjCH,EAAOI,SAASC,eAChBH,QAAQ5C,IAAI0C,EAAOG,cASvBG,OAAQV,IAEd9B,OAAQC,WAET,SAAUR,EAAQC,EAAKC,GACpBJ,OAAOC,IAAI,oBACbQ,OAAQC","file":"main.min.js","sourcesContent":["/*\n    logger - 向右侧信息台输出信息\n    pattern - singleton\n */\nvar logger = (function(global, doc, undef) {\n    function _log(msg) {\n        if (msg) {\n            $('.logger-list').last().append('<li \"class=\"logger-list-item\"> - ' + new Date() + ': ' + msg + ' - </li>');\n        }\n    }\n\n    return {\n        log: _log\n    };\n}(window, document));\n\n/**\n * mediator - 中介者，负责传送指令\n */\nvar mediator = (function ( global, doc, undef ) {\n    var orbits = {},\n        subUid = -1,\n\n        subscribe = function (orbit, func ) {\n            var token;\n\n            if (!orbits[orbit]) {\n                orbits[orbit] = [];\n            }\n\n    \t\t// add observer to observerlist(orbits)\n            token = (++subUid).toString();\n            orbits[orbit].push({\n                context: this,\n                orbit: orbit,\n                token: token,\n                callback: func\n            });\n\n            return token;\n        },\n        publish = function (orbit) {\n            var args,\n                len;\n\n            // undefined check\n            if (!orbits[orbit]) {\n                return false;\n            }\n\n            args = Array.prototype.slice.call(arguments);\n            len = orbits[orbit].length;\n\n            for (var i = 0;i < len;i++) {\n                var subscription = orbits[orbit][i];\n                subscription.callback.apply(subscription.context, args);\n            }\n\n            // chain pattern\n            return this;\n        },\n        unsubscribe = function (token) {\n            for (var m in orbits) {\n                if (orbits[m]) {\n                    for (var i = 0, j = orbits[m].length; i < j; i++) {\n                        if (orbits[m][i].token === token) {\n                            orbits[m].splice(i, 1);\n                            return token;\n                        }\n                    }\n                }\n            }\n            return false;\n        };\n\n        return {\n            subscribe: subscribe,\n            publish: publish,\n            unsubscribe: unsubscribe,\n        };\n}(window, document));\n\n/**\n *  spaceship prototype\n */\nfunction spaceship(orbit) {\n    var obj = {\n        isFly: falsem,\n        isGone: false,\n        leftEnergy: 100,\n        flySpeed: 1,\n        restoreSpeed: 5,\n        consumeSpeed: 10,\n        angle: 0,\n\n        driveSys: {\n            launch: function () {\n                if (obj.energy > 0) {\n                    obj.isFly = true;\n                }\n            },\n            stop: function () {\n                obj.isFly = false;\n            },\n            fly: function () {\n                if (obj.isFly) {\n                    obj.angle += obj.speed;\n                }\n                obj.angle %= 360;\n            }\n        },\n\n        energySys: {\n            restore: function () {\n                if (!obj.isFly) {\n                    obj.energy += obj.restoreSpeed;\n                }\n                if (obj.energy > 100) {\n                    obj.energy = 100;\n                }\n            },\n            consume: function () {\n                if (obj.isFly) {\n                    obj.energy -= obj.consumeSpeed;\n                }\n                if (obj.energy <= 0) {\n                    obj.isFly = false;\n                    obj.energy = 0;\n                }\n            }\n        },\n\n        destroySys: {\n            destroy: function () {\n                obj.isGone = true;\n                $('#ship' + obj.orbit).remove();\n            }\n        },\n\n        transferSys: {\n            messageReceiver: function (orbit, msg) {\n                switch (msg.command) {\n                    case 'launch':\n                        obj.driveSys.launch();\n                        break;\n                    case 'stop':\n                        obj.driveSys.stop();\n                        break;\n                    case 'rate':\n                        obj.flySpeed = msg.value;\n                        break;\n                    case 'destory':\n                        obj.destroySys.destroy();\n                        break;\n                    default:\n                        logger.log('错误指令!');\n                        break;\n                }\n            }\n        }\n    };\n\n    return obj;\n}\n\n/**\n * commander - 指挥官\n */\nvar commander = (function (global, doc, undef) {\n    var commandList = ['launch', 'stop', 'rate', 'destroy'];\n\n    $('panel-list-item').click(function (e) {\n        var event = e || window.event,\n            target = event.target || event.srcElement;\n\n            console.log(target.innerHTML);\n\n        if (target.nodeName.toLowerCase() == \"button\") {\n            console.log(target.innerHTML);\n        }\n    });\n\n    function _create() {\n\n    }\n\n    return {\n        create: _create\n    };\n}(window, document));\n\n(function (global, doc, undef) {\n    logger.log('test for logger');\n}(window, document));\n"],"sourceRoot":"/source/"}