function spaceship(e){var n={isFly:falsem,isGone:!1,leftEnergy:100,flySpeed:1,restoreSpeed:5,consumeSpeed:10,angle:0,driveSys:{launch:function(){n.energy>0&&(n.isFly=!0)},stop:function(){n.isFly=!1},fly:function(){n.isFly&&(n.angle+=n.speed),n.angle%=360}},energySys:{restore:function(){n.isFly||(n.energy+=n.restoreSpeed),n.energy>100&&(n.energy=100)},consume:function(){n.isFly&&(n.energy-=n.consumeSpeed),n.energy<=0&&(n.isFly=!1,n.energy=0)}},destroySys:{destroy:function(){n.isGone=!0,$("#ship"+n.orbit).remove()}},transferSys:{messageReceiver:function(e,r){switch(r.command){case"launch":n.driveSys.launch();break;case"stop":n.driveSys.stop();break;case"rate":n.flySpeed=r.value;break;case"destory":n.destroySys.destroy();break;default:logger.log("错误指令!")}}}};return n}var commander=function(e,n,r){$("panel-list").click(function(e){var n=e||window.event,r=n.target||n.srcElement;alert(r.innerHTML),"button"==r.nodeName.toLowerCase()})}(window,document);!function(e,n,r){}(window,document);var logger=function(e,n,r){function t(e){e&&$(".logger-list").last().append('<li "class="logger-list-item"> - '+new Date+": "+e+" - </li>")}return{log:t}}(window,document),mediator=function(e,n,r){var t={},o=-1,i=function(e,n){var r;return t[e]||(t[e]=[]),r=(++o).toString(),t[e].push({context:this,orbit:e,token:r,callback:n}),r},s=function(e){var n,r;if(!t[e])return!1;n=Array.prototype.slice.call(arguments),r=t[e].length;for(var o=0;r>o;o++){var i=t[e][o];i.callback.apply(i.context,n)}return this},a=function(e){for(var n in t)if(t[n])for(var r=0,o=t[n].length;o>r;r++)if(t[n][r].token===e)return t[n].splice(r,1),e;return!1};return{subscribe:i,publish:s,unsubscribe:a}}(window,document);